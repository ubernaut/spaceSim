const onProgress = xhr => {
  if (xhr.lengthComputable) {
    const percentComplete = (xhr.loaded / xhr.total) * 100
    Void.log.debug(`${Math.round(percentComplete, 2)}% downloaded`)
  }
}

const onError = xhr => {}

const randomUniform = (min, max) => Math.random() * (max - min) + min

const getUrlParameter = sParam => {
  var sPageURL = decodeURIComponent(window.location.search.substring(1))

  var sURLVariables = sPageURL.split('&')

  var sParameterName

  var i

  for (i = 0; i < sURLVariables.length; i++) {
    sParameterName = sURLVariables[i].split('=')

    if (sParameterName[0] === sParam) {
      return sParameterName[1] === undefined ? true : sParameterName[1]
    }
  }
}

const s4 = () => {
  return Math.floor((1 + Math.random()) * 0x10000)
    .toString(16)
    .substring(1)
}

const guid = () => {
  const chunks = [ s4() + s4(), s4(), s4(), s4(), s4() + s4() + s4() ]
  return chunks.join('-')
}

const getAllConfigVars = () => {
  var oGetVars = {}
  if (window.location.search.length > 1) {
    for (
      var aItKey,
        nKeyId = 0,
        aCouples = window.location.search.substr(1).split('&');
      nKeyId < aCouples.length;
      nKeyId++
    ) {
      aItKey = aCouples[nKeyId].split('=')
      oGetVars[decodeURIComponent(aItKey[0])] =
        aItKey.length > 1 ? decodeURIComponent(aItKey[1]) : ''
    }
  }
  console.log(oGetVars)
  return oGetVars
}

export {
  onProgress,
  onError,
  randomUniform,
  getUrlParameter,
  guid,
  getAllConfigVars
}
