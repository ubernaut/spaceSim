import Key from"./Key";export default function Gamepad(){this.setGamepad(navigator.getGamepads()[Gamepad.gamepads.length]),Gamepad.gamepads.push(this)}Gamepad.prototype.setGamepad=function(e){if(void 0!==e){this.index=e.index,this.gamepad=e,this.buttons=[];for(var a=0;a<e.buttons.length;a++)this.buttons.push(new Key);this.setProductVendor(e),this.connected=!0}else console.warn("SyncInput: No Gamepad found"),this.disconnect()},Gamepad.prototype.disconnect=function(){this.vendor=-1,this.product=-1,this.connected=!1,this.gamepad=null,this.buttons=[]},Gamepad.prototype.setProductVendor=function(e){try{var a=e.id.split(":");return this.vendor=a[1].split(" ")[1],void(this.product=a[2].replace(" ","").replace(")",""))}catch(e){}try{a=e.id.split("-"),this.vendor=a[0],this.product=a[1]}catch(e){}},Gamepad.prototype.update=function(){if(this.gamepad=navigator.getGamepads()[this.index],void 0!==this.gamepad)for(var e=0;e<this.buttons.length;e++)this.buttons[e].update(this.gamepad.buttons[e].pressed?Key.DOWN:Key.UP)},Gamepad.prototype.getAnalogueButton=function(e){return e>this.buttons.length||e<0?0:this.gamepad.buttons[e].value},Gamepad.prototype.getAxis=function(e){return e>this.gamepad.axes.length||e<0?0:this.gamepad.axes[button].value},Gamepad.prototype.buttonPressed=function(e){return!(e>this.buttons.length)&&this.buttons[e].pressed},Gamepad.prototype.buttonJustPressed=function(e){return!(e>this.buttons.length||e<0)&&this.buttons[e].justPressed},Gamepad.prototype.buttonJustReleased=function(e){return!(e>this.buttons.length||e<0)&&this.buttons[e].justReleased},Gamepad.prototype.dispose=function(){var e=Gamepad.gamepads.indexOf(this);-1!==e&&Gamepad.gamepads.splice(e,1)},Gamepad.gamepads=[],Gamepad.getGamepads=function(){return navigator.getGamepads()},Gamepad.startListener=function(){window.addEventListener("gamepadconnected",(e=>{for(var a=e.gamepad,t=0;t<Gamepad.gamepads.length;t++)Gamepad.gamepads[t].index===a.index&&Gamepad.gamepads[t].setGamepad(a)})),window.addEventListener("gamepaddisconnected",(e=>{var a=e.gamepad;console.warn("SyncInput: Gamepad "+a.id+" disconnected");for(var t=0;t<Gamepad.gamepads.length;t++)Gamepad.gamepads[t].index===a.index&&Gamepad.gamepads[t].disconnect()}))},Gamepad.startListener(),Gamepad.LEFT=14,Gamepad.RIGHT=15,Gamepad.DOWN=13,Gamepad.UP=12,Gamepad.SELECT=8,Gamepad.START=9,Gamepad.HOME=16,Gamepad.LEFT_TRIGGER_A=4,Gamepad.LEFT_TRIGGER_B=6,Gamepad.RIGHT_TRIGGER_A=5,Gamepad.RIGHT_TRIGGER_B=7,Gamepad.A=0,Gamepad.B=1,Gamepad.C=2,Gamepad.D=3,Gamepad.LEFT_ANALOGUE_HOR=0,Gamepad.LEFT_ANALOGUE_VERT=1,Gamepad.RIGHT_ANALOGUE_HOR=2,Gamepad.RIGHT_ANALOGUE_VERT=3;